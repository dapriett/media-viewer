<div #container
     [ngClass]="{ 'comments-panel comment-container': true, 'expanded': showCommentsPanel }"
     [style.height.px]="height"
     (click)="onContainerClick($event)">
  <ng-container *ngFor="let annotation of (comments$ | async); let i = index;">
    <mv-anno-comment [ngStyle]="showCommentsPanel ? {} : {'display':'none'}"
        #commentComponent
        (commentClick)="onSelect($event)"
        (delete)="onCommentDelete($event)"
        (updated)="onCommentUpdate($event)"
        (changes)="allCommentsSaved()"
        [selected]="annotation.annotationId === selectAnnotation.annotationId"
        [editable]="annotation.annotationId === selectAnnotation.annotationId ? selectAnnotation.editable : false"
        [zoom]="zoom"
        [rotate]="rotate"
        [index]="i"
        [page]="annotation.page"
        [pageHeights]="pageHeights"
        [comment]="annotation"
        [rectangle]="topRectangle(annotation.annotationId)"
        (renderComments)="redrawComments()">
    </mv-anno-comment>
  </ng-container>
</div>
